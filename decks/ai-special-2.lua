require("ai.ai")
function OnStartOfDuel()
end

function OnStartOfDuel_Boss999()
	if player_ai~=nil then 
		EnableCheats999(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat999=EnableCheats999
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat999(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats999(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_DRAW)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end
--全部怪兽
tc=Duel.CreateToken(1-player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(20)
	    if res==4 then
            Duel.MoveToField(tc,1-player_ai,1-player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(1-player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(20)
	    if res==4 then
            Duel.MoveToField(tc,1-player_ai,1-player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(20)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(1-player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(1-player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(1-player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,1-player_ai,1-player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,1-player_ai)
end
function OnStartOfDuel_Boss2()
	if player_ai~=nil then 
		EnableCheats2(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat2=EnableCheats2
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat2(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats2(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_DRAW)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(12000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(6000),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss3()
	if player_ai~=nil then 
		EnableCheats3(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat3=EnableCheats3
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat3(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats3(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_STANDBY)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss4()
	if player_ai~=nil then 
		EnableCheats4(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat4=EnableCheats4
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat4(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats4(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_MAIN1)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss5()
	if player_ai~=nil then 
		EnableCheats5(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat5=EnableCheats5
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat5(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats5(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_BATTLE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss6()
	if player_ai~=nil then 
		EnableCheats6(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat6=EnableCheats6
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat6(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats6(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_DAMAGE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss7()
	if player_ai~=nil then 
		EnableCheats7(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat7=EnableCheats7
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat7(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats7(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_DAMAGE_CAL)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss8()
	if player_ai~=nil then 
		EnableCheats8(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat8=EnableCheats8
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat8(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats8(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_MAIN2)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss9()
	if player_ai~=nil then 
		EnableCheats9(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat9=EnableCheat9
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat9(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats9(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+PHASE_END)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss10()
	if player_ai~=nil then 
		EnableCheats10(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat10=EnableCheats10
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat10(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats10(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_FLIP)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss11()
	if player_ai~=nil then 
		EnableCheats11(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat11=EnableCheats11
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat11(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats11(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_FREE_CHAIN)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss12()
	if player_ai~=nil then 
		EnableCheats12(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat12=EnableCheats12
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat12(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats12(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DESTROY)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss13()
	if player_ai~=nil then 
		EnableCheats13(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat13=EnableCheats13
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat13(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats13(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_REMOVE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

function OnStartOfDuel_Boss14()
	if player_ai~=nil then 
		EnableCheats14(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat14=EnableCheats14
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat14(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats14(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE+EVENT_TO_HAND)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss15()
	if player_ai~=nil then 
		EnableCheats15(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat15=EnableCheats15
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat15(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats15(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TO_DECK)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss16()
	if player_ai~=nil then 
		EnableCheats16(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat16=EnableCheats16
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat16(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats16(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TO_GRAVE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss17()
	if player_ai~=nil then 
		EnableCheats17(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat17=EnableCheats17
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat17(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats17(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_LEAVE_FIELD)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss18()
	if player_ai~=nil then 
		EnableCheats18(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat18=EnableCheats18
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat18(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats18(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHANGE_POS)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss19()
	if player_ai~=nil then 
		EnableCheats19(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat19=EnableCheats19
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat19(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats19(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_RELEASE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss20()
	if player_ai~=nil then 
		EnableCheats20(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat20=EnableCheats20
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat20(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats20(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DISCARD)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss21()
	if player_ai~=nil then 
		EnableCheats21(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat21=EnableCheats21
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat21(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats21(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_LEAVE_FIELD_P)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss22()
	if player_ai~=nil then 
		EnableCheats22(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat22=EnableCheats22
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat22(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats22(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAIN_SOLVING)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss23()
	if player_ai~=nil then 
		EnableCheats23(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat23=EnableCheats23
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat23(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats23(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAIN_ACTIVATING)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss24()
	if player_ai~=nil then 
		EnableCheats24(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat24=EnableCheats24
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat24(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats24(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAIN_SOLVED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(8)
	    if res==4 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss25()
	if player_ai~=nil then 
		EnableCheats25(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat25=EnableCheats25
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat25(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats25(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAIN_NEGATED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 
 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss26()
	if player_ai~=nil then 
		EnableCheats26(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat26=EnableCheats26
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat26(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats26(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAIN_DISABLED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss27()
	if player_ai~=nil then 
		EnableCheats27(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat27=EnableCheats27
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat27(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats27(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CHAINING)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss28()
	if player_ai~=nil then 
		EnableCheats28(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat28=EnableCheats28
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat28(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats28(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BECOME_TARGET)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss29()
	if player_ai~=nil then 
		EnableCheats9(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat29=EnableCheats29
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat29(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats29(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DESTROYED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss30()
	if player_ai~=nil then 
		EnableCheats30(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat30=EnableCheats30
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat30(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats30(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_SUMMON_SUCCESS)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss31()
	if player_ai~=nil then 
		EnableCheats31(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat31=EnableCheats31
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat31(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats31(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_FLIP_SUMMON_SUCCESS)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss32()
	if player_ai~=nil then 
		EnableCheats32(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat32=EnableCheats32
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat32(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats32(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_SPSUMMON_SUCCESS)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss33()
	if player_ai~=nil then 
		EnableCheats33(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat33=EnableCheats33
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat33(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats33(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_SUMMON)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss34()
	if player_ai~=nil then 
		EnableCheats34(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat34=EnableCheats34
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat34(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats34(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_FLIP_SUMMON)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss35()
	if player_ai~=nil then 
		EnableCheats35(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat35=EnableCheats35
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat35(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats35(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_SPSUMMON)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss36()
	if player_ai~=nil then 
		EnableCheats36(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat36=EnableCheats36
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat36(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats36(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_MSET)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss37()
	if player_ai~=nil then 
		EnableCheats37(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat37=EnableCheats37
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat37(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats37(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_SSET)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss38()
	if player_ai~=nil then 
		EnableCheats38(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat38=EnableCheats38
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat38(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats38(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BE_MATERIAL)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss39()
	if player_ai~=nil then 
		EnableCheats39(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat39=EnableCheats39
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat39(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats39(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BE_PRE_MATERIAL)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss40()
	if player_ai~=nil then 
		EnableCheats40(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat40=EnableCheats40
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat40(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats40(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DRAW)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss41()
	if player_ai~=nil then 
		EnableCheats41(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat41=EnableCheats41
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat41(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats41(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DAMAGE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss42()
	if player_ai~=nil then 
		EnableCheats42(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat42=EnableCheats42
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat42(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats42(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_RECOVER)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss43()
	if player_ai~=nil then 
		EnableCheats43(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat43=EnableCheats43
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat43(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats43(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PREDRAW)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 require("ai.ai-special")

math.randomseed( require("os").time() )
function OnStartOfDuel_Boss44()
	if player_ai~=nil then 
		EnableCheats44(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat44=EnableCheats44
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat44(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats44(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_CONTROL_CHANGED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss45()
	if player_ai~=nil then 
		EnableCheats45(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat45=EnableCheats45
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat45(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats45(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_EQUIP)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss46()
	if player_ai~=nil then 
		EnableCheats46(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat46=EnableCheats46
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat46(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats46(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_ATTACK_ANNOUNCE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss47()
	if player_ai~=nil then 
		EnableCheats47(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat47=EnableCheats47
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat47(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats47(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BE_BATTLE_TARGET)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss48()
	if player_ai~=nil then 
		EnableCheats48(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat48=EnableCheats48
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat48(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats48(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLE_START)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss49()
	if player_ai~=nil then 
		EnableCheats49(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat49=EnableCheats49
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat49(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats49(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLE_CONFIRM)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss50()
	if player_ai~=nil then 
		EnableCheats50(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat50=EnableCheats50
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat50(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats50(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PRE_DAMAGE_CALCULATE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss51()
	if player_ai~=nil then 
		EnableCheats51(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat51=EnableCheats51
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat51(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats51(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DAMAGE_CALCULATING)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss52()
	if player_ai~=nil then 
		EnableCheats52(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat52=EnableCheats52
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat52(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats52(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PRE_BATTLE_DAMAGE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss53()
	if player_ai~=nil then 
		EnableCheats53(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat53=EnableCheats53
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat53(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats53(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss54()
	if player_ai~=nil then 
		EnableCheats54(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat54=EnableCheats54
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat54(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats54(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLE_DESTROYING)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(8)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss55()
	if player_ai~=nil then 
		EnableCheats55(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat55=EnableCheats55
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat55(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats55(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLE_DESTROYED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss56()
	if player_ai~=nil then 
		EnableCheats56(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat56=EnableCheats56
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat56(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats56(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DAMAGE_STEP_END)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss57()
	if player_ai~=nil then 
		EnableCheats57(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat57=EnableCheats57
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat57(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats57(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_ATTACK_DISABLED)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss58()
	if player_ai~=nil then 
		EnableCheats58(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat58=EnableCheats58
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat58(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats58(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_BATTLE_DAMAGE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss59()
	if player_ai~=nil then 
		EnableCheats59(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat59=EnableCheats59
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat59(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats59(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TOSS_DICE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss60()
	if player_ai~=nil then 
		EnableCheats60(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat60=EnableCheats60
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat60(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats60(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TOSS_COIN)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss61()
	if player_ai~=nil then 
		EnableCheats61(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat61=EnableCheats61
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat61(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats61(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TOSS_COIN_NEGATE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss62()
	if player_ai~=nil then 
		EnableCheats62(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat62=EnableCheats62
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat62(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats62(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TOSS_DICE_NEGATE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss63()
	if player_ai~=nil then 
		EnableCheats63(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat63=EnableCheats63
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat63(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats63(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_LEVEL_UP)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss64()
	if player_ai~=nil then 
		EnableCheats64(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat64=EnableCheats64
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat64(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats64(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PAY_LPCOST)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss65()
	if player_ai~=nil then 
		EnableCheats65(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat65=EnableCheats65
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat65(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats65(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_DETACH_MATERIAL)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss66()
	if player_ai~=nil then 
		EnableCheats66(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat66=EnableCheats66
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat66(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats66(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_TURN_END)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss67()
	if player_ai~=nil then 
		EnableCheats67(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat67=EnableCheats67
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat67(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats67(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 function OnStartOfDuel_Boss68()
	if player_ai~=nil then 
		EnableCheats68(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat68=EnableCheats68
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat68(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats68(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_PHASE_START)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss69()
	if player_ai~=nil then 
		EnableCheats69(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat69=EnableCheats69
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat69(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats69(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_ADD_COUNTER)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end
function OnStartOfDuel_Boss70()
	if player_ai~=nil then 
		EnableCheats70(TokenList)
		return
	end
	local cheat1=EnableCheats
	local cheat70=EnableCheats70
	local list=TokenList
	EnableCheats=function ()
		cheat1()
		cheat70(list)
	end
	local savc=SaveCards
	SaveCards=function()
		if player_ai==nil then 
			player_ai=1
			playersetupcomplete = true
			EnableCheats()
		end		
		savc()
	end
	GlobalCheating = 1

	----------------
end
function EnableCheats70(list)

local e1=Effect.GlobalEffect()
e1:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
e1:SetCode(EVENT_REMOVE_COUNTER)
e1:SetCountLimit(1)
e1:SetOperation(function(e,tp,eg,ep,ev,re,r,rp) 
			    if Duel.GetTurnPlayer()==player_ai or 1-player_ai then 
end

--直接拿卡
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end
tc=Duel.SelectMatchingCard(tp,Card.IsAbleToHand,tp,LOCATION_DECK,0,1,1,nil)
local res=math.random(8)
	              if res==4 then
                       Duel.SendtoHand(tc,player_ai,REASON_RULE)			
				    end		
--全部怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--强力怪兽
tc=Duel.CreateToken(player_ai,strongmonsterList[math.random(#strongmonsterList)]) 
     local res=math.random(8)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--小怪兽
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
tc=Duel.CreateToken(player_ai,pawnlist[math.random(#pawnlist)]) 
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEUP_ATTACK,true)	  
			    end
--翻转怪兽
tc=Duel.CreateToken(player_ai,allmonsterList[math.random(#allmonsterList)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
tc=Duel.CreateToken(player_ai,fliplist[math.random(#fliplist)])
     local res=math.random(8)
		if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)		
			else
			
				end  
	local res=math.random(8)
        if res==4 and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>1 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_MZONE,POS_FACEDOWN_DEFENCE,true)	 		
				end  
--摇摆怪兽
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  
tc=Duel.CreateToken(player_ai,plist[math.random(#plist)])
     local res=math.random(32)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEUP,true)
				end  	
				
     local res=math.random(8)
	    if res==4 then
--洗切局势1
	local g1=Duel.GetMatchingGroup(Card.IsAbleToChangeControler,0,LOCATION_ONFIELD,LOCATION_ONFIELD,nil)
	local g2=Duel.GetMatchingGroup(Card.IsAbleToGrave,0,LOCATION_GRAVE,LOCATION_GRAVE,nil)
	local g3=Duel.GetMatchingGroup(Card.IsAbleToHand,0,LOCATION_HAND,LOCATION_HAND,nil)
	local g4=Duel.GetMatchingGroup(Card.IsAbleToRemove,0,LOCATION_REMOVED,LOCATION_REMOVED,nil)
	local g5=Duel.GetMatchingGroup(Card.IsAbleToGraveAsCost,0,LOCATION_EXTRA,LOCATION_EXTRA,nil)
	local g6=Duel.GetMatchingGroup(Card.IsAbleToDeck,0,LOCATION_DECK,LOCATION_DECK,nil)
	local sg=Group.CreateGroup()
		local sg1=g1:RandomSelect(tp,1)
		sg:Merge(sg1)

		local sg2=g2:RandomSelect(tp,1)
		sg:Merge(sg2)

		local sg3=g3:RandomSelect(tp,1)
		sg:Merge(sg3)

		local sg4=g4:RandomSelect(tp,1)
		sg:Merge(sg4)

		local sg5=g5:RandomSelect(tp,1)
		sg:Merge(sg5)

		local sg6=g6:RandomSelect(tp,1)
		sg:Merge(sg6)
	local res=math.random(36)
	    --墓地
		if res==4 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==2 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==3 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		if res==22 then
		Duel.SendtoGrave(sg,REASON_RULE)
		end
		if res==23 then
		Duel.SendtoGrave(sg,REASON_EFFECT)
		end
		if res==24 then
		Duel.SendtoGrave(sg,REASON_COST)
		end
		--手牌
		if res==4 then
		Duel.SendtoHand(sg,0,REASON_RULE)
		end
		if res==5 then
		Duel.SendtoHand(sg,0,REASON_EFFECT)
		end
		if res==6 then
		Duel.SendtoHand(sg,0,REASON_COST)
		end
        if res==7 then
		Duel.SendtoHand(sg,1,REASON_RULE)
		end
		if res==8 then
		Duel.SendtoHand(sg,1,REASON_EFFECT)
		end
		if res==9 then
		Duel.SendtoHand(sg,1,REASON_COST)
		end
		--除外
		if res==40 then
		Duel.Remove(sg,POS_FACEUP,REASON_RULE)
		end
		if res==41 then
		Duel.Remove(sg,POS_FACEUP,REASON_EFFECT)
		end
		if res==42 then
		Duel.Remove(sg,POS_FACEUP,REASON_COST)
		end
		if res==43 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_RULE)
		end
		if res==44 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_EFFECT)
		end
		if res==45 then
		Duel.Remove(sg,POS_FACEDOWN,REASON_COST)
		--卡组
		end
		if res==46 then
		Duel.SendtoDeck(sg,nil,1,REASON_RULE)
		end
		if res==47 then
		Duel.SendtoDeck(sg,nil,1,REASON_EFFECT)
		end
		if res==48 then
		Duel.SendtoDeck(sg,nil,1,REASON_COST)
		end
		if res==49 then
		Duel.SendtoDeck(sg,nil,0,REASON_RULE)
		end
		if res==20 then
		Duel.SendtoDeck(sg,nil,0,REASON_EFFECT)
		end
		if res==21 then
		Duel.SendtoDeck(sg,nil,0,REASON_COST)
		end	
  end  	

		
--墓坑
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
tc=Duel.CreateToken(player_ai,gravepreventlist[math.random(#gravepreventlist)]) 
	local res=math.random(32)
	    if res==4 
		    then
		    Duel.SendtoGrave(tc,player_ai,REASON_RULE) 		
				end
--场地
tc=Duel.CreateToken(player_ai,fieldlist[math.random(#fieldlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--手坑
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	 
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
             Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)				
			    end
tc=Duel.CreateToken(player_ai,handpreventlist[math.random(#handpreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	
			    end 
        if res==2 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
            Duel.SendtoDeck(tc,player_ai,1,REASON_RULE)			
			    end
--阻碍对方召唤
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,summonpreventlist[math.random(#summonpreventlist)])
	local res=math.random(8)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--阻碍效果伤害
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
tc=Duel.CreateToken(player_ai,damagepreventlist[math.random(#damagepreventlist)])
	local res=math.random(32)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)	    		  
			    end
--强力魔法陷阱
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)   		  
			    end
tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,strongspelltrapList[math.random(#strongspelltrapList)])
	local res=math.random(25)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的魔法
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--有用的陷阱
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
	tc=Duel.CreateToken(player_ai,usefulspelllist[math.random(#usefulspelllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)		  
			    end
--全部魔法			
tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)	  
			    end
	tc=Duel.CreateToken(player_ai,spellalllist[math.random(#spellalllist)])
	local res=math.random(8)
	    if res==4 then
           Duel.SendtoHand(tc,player_ai,REASON_RULE)  
			    end
--全部陷阱			
tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	tc=Duel.CreateToken(player_ai,trapalllist[math.random(#trapalllist)])
	local res=math.random(22)
	    if res==4 then
            Duel.SendtoHand(tc,player_ai,REASON_RULE)		  
			    end
	
	
	
	
	
	
	
	
--血量处理
	local res=math.random(68)
  	  if res==4 then
	  Duel.Recover(player_ai,math.random(18000),REASON_DAMAGE)
	  end
	  if res==2 then
	  Duel.Damage(1-player_ai,math.random(1800),REASON_DAMAGE)
	  end
	  if res==3 then
	  Duel.Recover(1-player_ai,math.random(1000),REASON_DAMAGE)
	  end
	  if res==4 then
	  Duel.Damage(player_ai,math.random(500),REASON_DAMAGE)
	  end
--
	  if res==5 then
	  Duel.Recover(player_ai,math.random(12000),REASON_EFFECT_DAMAGE)
	  end
	  if res==6 then
	  Duel.Damage(1-player_ai,math.random(4000),REASON_EFFECT_DAMAGE)
	  end
	  if res==7 then
	  Duel.Recover(1-player_ai,math.random(800),REASON_EFFECT_DAMAGE)
	  end
	  if res==8 then
	  Duel.Damage(player_ai,math.random(1400),REASON_EFFECT_DAMAGE)
	  end
--
	  if res==9 then
	  Duel.Recover(player_ai,math.random(10000),REASON_BATTLE_DAMAGE)
	  end
      if res==40 then
	  Duel.Damage(1-player_ai,math.random(1200),REASON_BATTLE_DAMAGE)
	  end
	  if res==41 then
	  Duel.Recover(1-player_ai,math.random(600),REASON_BATTLE_DAMAGE)
	  end
	  if res==42 then
	  Duel.Damage(player_ai,math.random(200),REASON_BATTLE_DAMAGE)
	  end
--
	  if res==43 then
	  Duel.Recover(player_ai,math.random(11811),REASON_BATTLE_COST)
	  end
	  if res==44 then
	  Duel.Damage(1-player_ai,math.random(1000),REASON_BATTLE_COST)
	  end
	  if res==45 then
	  Duel.Recover(1-player_ai,math.random(200),REASON_BATTLE_COST)
	  end
	  if res==46 then
	  Duel.Damage(player_ai,math.random(100),REASON_BATTLE_COST)
	  end	
--
	  if res==47 then
	  Duel.Recover(player_ai,math.random(6611),REASON_RULE)
	  end
	  if res==48 then
	  Duel.Damage(1-player_ai,math.random(5000),REASON_RULE)
	  end
	  if res==49 then
	  Duel.Recover(1-player_ai,math.random(10000),REASON_RULE)
	  end
	  if res==20 then
	  Duel.Damage(player_ai,math.random(50),REASON_RULE)
	  end	

		local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
			local res=math.random(8)
	    if res==4 then
	local g1=Duel.GetMatchingGroup(nil,player_ai,LOCATION_HAND,0,nil)
	local sg=Group.CreateGroup()
    local sg1=g1:RandomSelect(tp,1)
	sg:Merge(sg1)
	local res=math.random(3)
	if res==4 then
	Duel.SendtoDeck(sg,nil,1,REASON_RULE)
	end
	end 
	
	

			local tc=Duel.CreateToken(player_ai,list[math.random(#list)])
	local tccode=tc:GetOriginalCode()
		local res=math.random(2)
	    if res==1 then
	if tc:IsType(TYPE_MONSTER) and  Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0  then
	--and Duel.GetLocationCount(player_ai,LOCATION_MZONE)>0 
		if not TokenSumType[tccode] then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_FUSION)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_RITUAL)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_SYNCHRO)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_XYZ)] end
		if TokenSumType[tccode]==0 then TokenSumType[tccode]=TokenSumType[bit.band(tc:GetType(),TYPE_PENDULUM)] end
		if not tc:IsCanBeSpecialSummoned(e,TokenSumType[tccode],player_ai,true,true) then return end
		if ExpansionCheating[tccode] then 
			ExpansionCheating[tccode](tc)
		else
			ExpansionCheating[bit.band(tc:GetType(),TYPE_XYZ)](tc,0,0,0,0,0)
		end
	
	
	
	
		
elseif tc:IsType(TYPE_SPELL+TYPE_TRAP) and Duel.GetLocationCount(player_ai,LOCATION_SZONE)>0 then
		Duel.MoveToField(tc,player_ai,player_ai,LOCATION_SZONE,POS_FACEDOWN,true)
	end
	end
   
  end)
  Duel.RegisterEffect(e1,player_ai)
  
  local e723=Effect.GlobalEffect()
	e723:SetType(EFFECT_TYPE_CONTINUOUS+EFFECT_TYPE_FIELD)
	e723:SetCode(EFFECT_CHANGE_DAMAGE)
	e723:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
	e723:SetCountLimit(1)
	e723:SetTargetRange(1,0)
	e723:SetValue(function(e,re,dam,r,rp,rc)
	local res=math.random(4)
	              if res==4 then
		return math.min(dam,Duel.GetLP(v1)-math.random(8000)) end
	end)
	Duel.RegisterEffect(e723,player_ai)
	--------------
	local f1=Duel.CheckLPCost
	Duel.CheckLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f1(v1,v2) end
		return v2
	end
	--------------
	local f2=Duel.PayLPCost
	Duel.PayLPCost=function(v1,v2)
		if v1~=player_ai or v2==nil then return f2(v1,v2) end
		return f2(v1,math.min(v2,Duel.GetLP(v1)-1))
	end
	--------------
	local f3=Duel.Win
	Duel.Win=function(v1,v2)
		if v1==player_ai or v2==nil then return f3(v1,v2) end
		Duel.Remove(Duel.GetFieldGroup(player_ai,0,0xff),POS_FACEDOWN,REASON_RETURN)
		return
	end
	--------------
	local f4=Duel.Draw
	Duel.Draw=function(v1,v2,v3)
		if v1~=player_ai or v2==nil or Duel.GetFieldGroupCount(player_ai,LOCATION_DECK,0)>=v2 then return f4(v1,v2,v3) end
		f4(v1,math.min(v3,Duel.GetFieldGroupCount(v1,LOCATION_DECK,0)),v3)
		return v2
	end
	---------------
	local e724=Effect.GlobalEffect()
	e724:SetType(EFFECT_TYPE_FIELD+EFFECT_TYPE_CONTINUOUS)
	e724:SetCode(EVENT_PREDRAW)
	e724:SetCondition(function(e,tp,eg,ep,ev,re,r,rp)
			return tp==Duel.GetTurnPlayer() and Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)<Duel.GetDrawCount(tp)
	end)
	e724:SetTarget(function(e,tp,eg,ep,ev,re,r,rp,chk)
		if chk==0 then return true end
		local e1=Effect.GlobalEffect()
		e1:SetType(EFFECT_TYPE_FIELD)
		e1:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e1:SetCode(EFFECT_DRAW_COUNT)
		e1:SetTargetRange(1,0)
		e1:SetReset(RESET_PHASE+PHASE_DRAW)
		e1:SetValue(0)
		Duel.RegisterEffect(e1,tp)
	end)
	Duel.RegisterEffect(e724,player_ai)
end

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 